<!doctype html>
<html lang="en">
  <head>
    <title>BlackBear | Video Categories</title>
    <link rel="icon" type="image/png" href="images/icon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="css/vendor/icomoon/style.css">
    <link rel="stylesheet" href="css/vendor/owl.carousel.min.css">
    <link rel="stylesheet" href="css/vendor/animate.min.css">
    <link rel="stylesheet" href="css/vendor/aos.css">
    <link rel="stylesheet" href="css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="css/vendor/jquery.fancybox.min.css">
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* ESTILOS COPIADOS LITERALMENTE DEL INDEX (27).HTML */
      .video-bg-global { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: #000; }
      .video-bg-global video { width: 100%; height: 100%; object-fit: cover; opacity: 0.5; }
      body, .unslate_co--site-wrap, .unslate_co--site-inner, .unslate_co--section { background-color: transparent !important; }
      
      .unslate_co--footer {
        background-color: #191919 !important;
        position: relative !important;
        display: block !important;
        z-index: 10 !important;
        margin-top: 0;
      }

      /* BOTÓN DE CIERRE (X) REFINADO DEL INDEX */
      .close-v1 { 
          display: inline-flex !important; 
          align-items: center; 
          justify-content: flex-end; 
          text-decoration: none !important; 
          transition: all 0.3s ease; 
          cursor: pointer !important;
          width: auto !important; 
          float: right; 
      }
      .close-v1 .icon-text { 
          font-family: 'Montserrat', sans-serif !important; 
          font-size: 10px; 
          margin-right: 12px; 
          color: #ffffff !important; 
          text-transform: uppercase; 
          font-weight: 700; 
          letter-spacing: 2px;
      }
      .close-circle { 
          width: 45px; height: 45px; 
          border: 1px solid rgba(255,255,255,0.4); 
          border-radius: 50%; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          font-size: 24px; 
          color: #ffffff; 
          transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
          padding-bottom: 4px; 
      }
      .close-v1:hover .close-circle { 
          background: #ffffff !important; 
          color: #000000 !important; 
          transform: scale(1.12); 
      }

      /* ESTILOS DE CATEGORÍAS */
      .category-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 60px 20px;
        border-radius: 4px;
        text-align: center;
        transition: 0.4s all ease;
        cursor: pointer;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .category-card h3 { font-weight: 800; letter-spacing: 4px; margin: 0; font-size: 1.2rem; color: #fff; text-transform: uppercase; }
      .category-card:hover { background: #ffffff; transform: translateY(-10px); }
      .category-card:hover h3 { color: #000 !important; }
      .wavy-divider { display: block; margin: 20px auto; width: 70px; filter: brightness(0) invert(1); }

      /* SINGLE VIEW */
      #project-single-view { color: #ffffff !important; display: none; }
      .meta-header { display: block; font-size: 11px; text-transform: uppercase; letter-spacing: 2px; color: rgba(255,255,255,0.6); font-weight: 700; }
      .meta-value { display: block; font-size: 15px; font-weight: 800; text-transform: uppercase; margin-bottom: 20px; }
    </style>
  </head>
  <body data-spy="scroll" data-target=".site-nav-target" data-offset="200">

    <div class="video-bg-global">
      <video autoplay loop muted playsinline><source src="video/bg.mp4" type="video/mp4"></video>
    </div>

    <nav class="unslate_co--site-mobile-menu">
      <div class="close-wrap d-flex">
        <a href="#" class="d-flex ml-auto js-menu-toggle">
          <span class="close-label">Close</span>
          <div class="close-times"><span class="bar1"></span><span class="bar2"></span></div>
        </a>
      </div>
      <div class="site-mobile-inner"></div>
    </nav>

    <div class="unslate_co--site-wrap">
      <div class="unslate_co--site-inner">

        <nav class="unslate_co--site-nav site-nav-target">
          <div class="container">
            <div class="row align-items-center justify-content-between text-left">
              <div class="col-md-5 text-right">
                <ul class="site-nav-ul js-clone-nav text-left d-none d-lg-inline-block">
                  <li><a href="index.html#home-section" class="nav-link">Home</a></li>
                  <li><a href="index.html#portfolio-section" class="nav-link">Portfolio</a></li>
                  <li><a href="index.html#about-section" class="nav-link">About</a></li>
                  <li><a href="index.html#services-section" class="nav-link">Services</a></li>
                </ul>
              </div>
              <div class="site-logo pos-absolute">
                <a href="index.html" class="unslate_co--site-logo" style="background: white; padding: 10px 15px; display: inline-block; border-radius: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);">
                  <img src="images/logo.png" alt="BlackBear Logo" style="height: 40px; width: auto; vertical-align: middle;">
                </a>
              </div>
              <div class="col-md-5 text-right text-lg-left">
                <ul class="site-nav-ul js-clone-nav text-left d-none d-lg-inline-block">
                  <li><a href="index.html#skills-section" class="nav-link">Skills</a></li>
                  <li><a href="index.html#testimonial-section" class="nav-link">Testimonial</a></li>
                  <li><a href="index.html#journal-section" class="nav-link">Journal</a></li>
                  <li><a href="index.html#contact-section" class="nav-link">Contact</a></li>
                </ul>
                <ul class="site-nav-ul-none-onepage text-right d-inline-block d-lg-none">
                  <li><a href="#" class="js-menu-toggle">Menu</a></li>
                </ul>
              </div>
            </div>
          </div>
        </nav>

        <div class="container" style="padding-top: 150px; min-height: 80vh;">
          
          <div id="selection-view">
            <div class="text-center mb-5">
              <h1 style="font-weight: 800; letter-spacing: 3px;">VIDEO CATEGORIES</h1>
              <img src="images/divider.png" class="wavy-divider" alt="divider">
              <p>Select a category to filter my work</p>
            </div>
            <div class="row gutter-v4" id="categories-container"></div>
            <div class="text-center mt-5">
              <a href="index.html" class="btn btn-outline-pill btn-custom-light">// BACK TO HOME //</a>
            </div>
          </div>

          <div id="grid-view" style="display: none; opacity: 0;">
            <div class="row">
              <div class="col-12 text-right mb-4">
                <a href="javascript:void(0)" onclick="closeCategory()" class="close-v1">
                  <span class="icon-text">Back to Categories</span>
                  <span class="close-circle">×</span>
                </a>
              </div>
            </div>
            <div class="text-center mb-5">
              <h1 id="current-category-title" style="font-weight: 800; letter-spacing: 3px; text-transform: uppercase;"></h1>
              <img src="images/divider.png" class="wavy-divider" alt="divider">
            </div>
            <div id="filtered-posts" class="row gutter-isotope-item"></div>
          </div>

          <div id="project-single-view">
            <div class="row">
              <div class="col-12 text-right mb-5">
                <a href="javascript:void(0)" onclick="closeProject()" class="close-v1">
                  <span class="icon-text">Back to Category Grid</span>
                  <span class="close-circle">×</span>
                </a>
              </div>
            </div>
            <div class="row align-items-center">
              <div class="col-lg-7"><h2 id="project-title" style="font-weight: 800;"></h2><div id="project-visual-content"></div></div>
              <div class="col-lg-4 offset-lg-1">
                <span class="meta-header">Description</span><span id="project-desc" class="meta-value"></span>
                <span class="meta-header">Date</span><span id="project-date" class="meta-value"></span>
                <span class="meta-header">Client</span><span id="project-client" class="meta-value"></span>
              </div>
            </div>
          </div>
        </div>

      </div> <footer class="unslate_co--footer unslate_co--section">
        <div class="container">
          <div class="row justify-content-center">
            <div class="col-md-7">
              <div class="footer-site-logo text-center">
                <a href="index.html" style="background: white; padding: 8px 12px; display: inline-block; border-radius: 5px; margin-bottom: 20px;">
                  <img src="images/logo.png" alt="BlackBear Logo" style="height: 35px; width: auto; vertical-align: middle;">
                </a>
              </div>
              <ul class="footer-site-social text-center">
                <li><a href="#">Facebook</a></li>
                <li><a href="#">Instagram</a></li>
              </ul>
              <p class="site-copyright text-center">
                Copyright &copy; <script>document.write(new Date().getFullYear());</script> BlackBear. All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <script src="js/scripts-dist.js"></script>
    <script src="js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
      const EXCEL_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR9yghObfHQDI1wcM1g4gn2uMOSSd_w-qYkS1TFHAJXsnJDA-zi8A_4X9ymMGhtreM7f0sY8JRGqnBE/pub?gid=0&single=true&output=csv";
      let allItems = [];

      document.addEventListener('DOMContentLoaded', function() {
        Papa.parse(EXCEL_URL, {
          download: true, header: true,
          complete: function(results) {
            allItems = results.data.filter(p => p.ID && p.Titulo);
            renderCategoryMenu();
          }
        });
      });

      function renderCategoryMenu() {
        const categories = [...new Set(allItems.map(item => item.Category || 'Video'))];
        let html = "";
        categories.forEach((cat, i) => {
          html += `
            <div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="${i*100}">
              <div class="category-card" onclick="openCategory('${cat}')"><h3>${cat}</h3></div>
            </div>`;
        });
        document.getElementById('categories-container').innerHTML = html;
      }

      function openCategory(cat) {
        document.getElementById('current-category-title').innerText = cat;
        const filtered = allItems.filter(item => item.Category === cat);
        let html = "";
        filtered.forEach(item => {
          html += `
            <div class="col-sm-6 col-md-6 col-lg-4 mb-4">
              <a href="javascript:void(0)" onclick="openProject('${item.ID}')" class="portfolio-item">
                <div class="overlay"><span class="wrap-icon icon-play_circle_filled"></span><div class="portfolio-item-content"><h3>${item.Titulo}</h3></div></div>
                <img src="${item.ThumbnailURL}" class="img-fluid" style="width:100%; height:250px; object-fit:cover;">
              </a>
            </div>`;
        });
        document.getElementById('filtered-posts').innerHTML = html;
        gsap.to("#selection-view", { duration: 0.4, opacity: 0, display: "none", onComplete: () => {
          gsap.fromTo("#grid-view", { opacity: 0, display: "block", y: 20 }, { duration: 0.6, opacity: 1, y: 0 });
        }});
      }

      function closeCategory() {
        gsap.to("#grid-view", { duration: 0.4, opacity: 0, display: "none", onComplete: () => {
          gsap.fromTo("#selection-view", { opacity: 0, display: "block", y: 20 }, { duration: 0.6, opacity: 1, y: 0 });
        }});
      }

      function openProject(id) {
        const p = allItems.find(x => x.ID == id);
        document.getElementById('project-title').innerText = p.Titulo;
        document.getElementById('project-desc').innerText = p.Descripcion;
        document.getElementById('project-date').innerText = p.Fecha || "2026";
        document.getElementById('project-client').innerText = p.Cliente || "Private";
        
        let url = p.VideoURL;
        let content = url.includes('youtube') 
          ? `<div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src=\"https://www.youtube.com/embed/${url.includes('v=') ? url.split('v=')[1] : url.split('/').pop()}\" style=\"position:absolute;top:0;left:0;width:100%;height:100%;\" frameborder=\"0\" allowfullscreen></iframe></div>`
          : `<video controls autoplay style=\"width:100%;\"><source src=\"${url}\" type=\"video/mp4\"></video>`;
        
        document.getElementById('project-visual-content').innerHTML = content;
        gsap.to("#grid-view", { duration: 0.4, opacity: 0, display: "none", onComplete: () => {
          gsap.fromTo("#project-single-view", { opacity: 0, display: "block", y: 20 }, { duration: 0.6, opacity: 1, y: 0 });
        }});
      }

      function closeProject() {
        gsap.to("#project-single-view", { duration: 0.4, opacity: 0, display: "none", onComplete: () => {
          document.getElementById('project-visual-content').innerHTML = "";
          gsap.fromTo("#grid-view", { opacity: 0, display: "block", y: 20 }, { duration: 0.6, opacity: 1, y: 0 });
        }});
      }
    </script>
  </body>
</html>
