<!doctype html>
<html lang="en">
  <head>
    <title>BlackBear | Video Categories</title>
    <link rel="icon" type="image/png" href="images/icon.png">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="css/vendor/icomoon/style.css">
    <link rel="stylesheet" href="css/vendor/owl.carousel.min.css">
    <link rel="stylesheet" href="css/vendor/animate.min.css">
    <link rel="stylesheet" href="css/vendor/aos.css">
    <link rel="stylesheet" href="css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* --- ELIMINACIÓN TOTAL DE ESPACIOS ARTIFICIALES --- */
      html, body { height: auto; margin: 0; padding: 0; }
      
      .video-bg-global { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: #000; }
      .video-bg-global video { width: 100%; height: 100%; object-fit: cover; opacity: 0.5; }
      
      body, .unslate_co--site-wrap, .unslate_co--site-inner { background-color: transparent !important; color: white; }

      /* FOOTER SÓLIDO SIN ESTIRAMIENTOS (IGUAL AL INDEX 27) */
      .unslate_co--footer {
        background-color: #191919 !important;
        padding: 40px 0;
        margin-top: 40px; /* Espacio justo y controlado */
        position: relative;
        z-index: 10;
      }

      /* BOTÓN DE CIERRE (X) PREMIUM DEL INDEX (27) */
      .close-v1 { 
          display: inline-flex !important; 
          align-items: center; 
          justify-content: flex-end; 
          text-decoration: none !important; 
          transition: all 0.3s ease; 
          cursor: pointer !important;
          float: right; 
          opacity: 0;
      }
      .close-v1 .icon-text { 
          font-family: 'Montserrat', sans-serif !important; 
          font-size: 10px; 
          margin-right: 12px; 
          color: #ffffff !important; 
          text-transform: uppercase; 
          font-weight: 700; 
          letter-spacing: 2px;
      }
      .close-circle { 
          width: 45px; height: 45px; 
          border: 1px solid rgba(255,255,255,0.4); 
          border-radius: 50%; 
          display: flex; 
          align-items: center; 
          justify-content: center; 
          font-size: 24px; 
          color: #ffffff; 
          transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
          padding-bottom: 4px; 
      }
      .close-v1:hover .close-circle { 
          background: #ffffff !important; 
          color: #000000 !important; 
          transform: scale(1.12); 
      }

      /* CATEGORÍAS */
      .category-card {
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.1);
        padding: 60px 20px;
        border-radius: 4px;
        text-align: center;
        transition: 0.4s all ease;
        cursor: pointer;
        height: 100%;
        display: flex; align-items: center; justify-content: center;
      }
      .category-card h3 { font-weight: 800; letter-spacing: 4px; margin: 0; font-size: 1.2rem; color: #fff; text-transform: uppercase; }
      .category-card:hover { background: #ffffff; transform: translateY(-10px); }
      .category-card:hover h3 { color: #000 !important; }
      .wavy-divider { display: block; margin: 15px auto; width: 70px; filter: brightness(0) invert(1); }

      /* METADATOS PROYECTO */
      #project-single-view { display: none; }
      .meta-item { margin-bottom: 30px; opacity: 0; }
      .meta-header { display: block; font-size: 11px; text-transform: uppercase; letter-spacing: 2px; color: #ffffff !important; opacity: 0.6; font-weight: 700; margin-bottom: 5px; }
      .meta-value { display: block; font-size: 15px; color: #ffffff !important; font-weight: 800; text-transform: uppercase; }
      
      .load-hidden { opacity: 0; }
    </style>
  </head>
  <body>

    <div class="video-bg-global">
      <video autoplay loop muted playsinline><source src="video/bg.mp4" type="video/mp4"></video>
    </div>

    <div class="unslate_co--site-wrap">
      <div class="unslate_co--site-inner">

        <nav class="unslate_co--site-nav site-nav-target">
          <div class="container">
            <div class="row align-items-center justify-content-between text-left">
              <div class="col-md-5 text-right">
                <ul class="site-nav-ul js-clone-nav text-left d-none d-lg-inline-block">
                  <li><a href="index.html#home-section" class="nav-link">Home</a></li>
                  <li><a href="index.html#portfolio-section" class="nav-link">Portfolio</a></li>
                  <li><a href="index.html#about-section" class="nav-link">About</a></li>
                  <li><a href="index.html#services-section" class="nav-link">Services</a></li>
                </ul>
              </div>
              <div class="site-logo pos-absolute">
                <a href="index.html" class="unslate_co--site-logo" style="background: white; padding: 10px 15px; display: inline-block; border-radius: 5px; box-shadow: 0 4px 10px rgba(0,0,0,0.3);">
                  <img src="images/logo.png" alt="BlackBear Logo" style="height: 40px; width: auto; vertical-align: middle;">
                </a>
              </div>
              <div class="col-md-5 text-right text-lg-left">
                <ul class="site-nav-ul js-clone-nav text-left d-none d-lg-inline-block">
                  <li><a href="index.html#skills-section" class="nav-link">Skills</a></li>
                  <li><a href="index.html#testimonial-section" class="nav-link">Testimonial</a></li>
                  <li><a href="index.html#journal-section" class="nav-link">Journal</a></li>
                  <li><a href="index.html#contact-section" class="nav-link">Contact</a></li>
                </ul>
              </div>
            </div>
          </div>
        </nav>

        <div class="container load-hidden" style="padding-top: 130px;">
          
          <div id="selection-view">
            <div class="text-center mb-5">
              <h1 style="font-weight: 800; letter-spacing: 3px;">VIDEO CATEGORIES</h1>
              <img src="images/divider.png" class="wavy-divider" alt="divider">
              <p>Select a category to filter my work</p>
            </div>
            <div class="row gutter-v4" id="categories-container"></div>
            
            <div class="text-center mt-5">
              <a href="index.html" class="btn btn-outline-pill btn-custom-light" style="padding: 12px 35px; font-size: 13px;">// BACK TO HOME //</a>
            </div>
          </div>

          <div id="grid-view" style="display: none;">
            <div class="row">
              <div class="col-12 text-right mb-4">
                <a href="javascript:void(0)" onclick="closeCategory()" class="close-v1" id="btn-back-cat">
                  <span class="icon-text">Back to Categories</span>
                  <div class="close-circle">×</div>
                </a>
              </div>
            </div>
            <div class="text-center mb-5">
              <h1 id="current-category-title" style="font-weight: 800; letter-spacing: 3px; text-transform: uppercase;"></h1>
              <img src="images/divider.png" class="wavy-divider" alt="divider">
            </div>
            <div id="filtered-posts" class="row gutter-isotope-item"></div>
            <div class="text-center mt-5">
              <a href="index.html" class="btn btn-outline-pill btn-custom-light" style="padding: 12px 35px; font-size: 13px;">// BACK TO HOME //</a>
            </div>
          </div>

          <div id="project-single-view">
            <div class="row">
              <div class="col-12 text-right mb-5">
                <a href="javascript:void(0)" onclick="closeProject()" class="close-v1" id="btn-back-grid">
                  <span class="icon-text">Back to Category Grid</span>
                  <div class="close-circle">×</div>
                </a>
              </div>
            </div>
            <div class="row align-items-center">
              <div class="col-lg-7"><h2 id="project-title" style="font-weight: 800; text-transform: uppercase;"></h2><div id="project-visual-content"></div></div>
              <div class="col-lg-4 offset-lg-1">
                <div class="meta-item"><span class="meta-header">Description</span><span id="project-desc" class="meta-value"></span></div>
                <div class="meta-item"><span class="meta-header">Date</span><span id="project-date" class="meta-value"></span></div>
                <div class="meta-item"><span class="meta-header">Client</span><span id="project-client" class="meta-value"></span></div>
              </div>
            </div>
          </div>

        </div>
      </div>

      <footer class="unslate_co--footer load-hidden">
        <div class="container text-center">
          <div class="footer-site-logo">
            <a href="index.html" style="background: white; padding: 8px 12px; display: inline-block; border-radius: 5px; margin-bottom: 15px;">
              <img src="images/logo.png" alt="BlackBear Logo" style="height: 35px;">
            </a>
          </div>
          <ul class="footer-site-social" style="list-style: none; padding: 0; display: flex; justify-content: center; gap: 20px; margin-bottom: 15px;">
            <li><a href="#">Facebook</a></li>
            <li><a href="#">Instagram</a></li>
          </ul>
          <p class="site-copyright" style="font-size: 12px;">Copyright &copy; 2026 BlackBear. All rights reserved.</p>
        </div>
      </footer>
    </div>

    <script src="js/scripts-dist.js"></script>
    <script src="js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>

    <script>
      const EXCEL_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vR9yghObfHQDI1wcM1g4gn2uMOSSd_w-qYkS1TFHAJXsnJDA-zi8A_4X9ymMGhtreM7f0sY8JRGqnBE/pub?gid=0&single=true&output=csv";
      let allItems = [];

      document.addEventListener('DOMContentLoaded', function() {
        Papa.parse(EXCEL_URL, {
          download: true, header: true,
          complete: function(results) {
            allItems = results.data.filter(p => p.ID && p.Titulo);
            renderCategoryMenu();
            gsap.to(".load-hidden", { duration: 1, opacity: 1, ease: "power2.out" });
          }
        });
      });

      function renderCategoryMenu() {
        const categories = [...new Set(allItems.map(item => item.Category || 'Video'))];
        let html = "";
        categories.forEach((cat, i) => {
          html += `<div class="col-md-4 mb-4" data-aos="fade-up" data-aos-delay="${i*100}">
                    <div class="category-card" onclick="openCategory('${cat}')"><h3>${cat}</h3></div>
                  </div>`;
        });
        document.getElementById('categories-container').innerHTML = html;
      }

      function openCategory(cat) {
        document.getElementById('current-category-title').innerText = cat;
        const filtered = allItems.filter(item => item.Category === cat);
        let html = "";
        filtered.forEach(item => {
          html += `<div class="col-sm-6 col-md-6 col-lg-4 mb-4">
                    <a href="javascript:void(0)" onclick="openProject('${item.ID}')" class="portfolio-item">
                      <div class="overlay"><span class="wrap-icon icon-play_circle_filled"></span><div class="portfolio-item-content"><h3>${item.Titulo}</h3></div></div>
                      <img src="${item.ThumbnailURL}" class="img-fluid" style="width:100%; height:250px; object-fit:cover;">
                    </a>
                  </div>`;
        });
        document.getElementById('filtered-posts').innerHTML = html;
        
        gsap.to("#selection-view", { duration: 0.4, opacity: 0, y: 20, display: "none", onComplete: () => {
          gsap.set("#grid-view", { display: "block", opacity: 0 });
          gsap.to("#grid-view", { duration: 0.6, y: 0, opacity: 1, ease: "power3.out" });
          gsap.fromTo("#btn-back-cat", { opacity: 0, x: 20 }, { duration: 0.5, opacity: 1, x: 0, delay: 0.3 });
        }});
      }

      function closeCategory() {
        gsap.to("#grid-view", { duration: 0.4, opacity: 0, y: 20, onComplete: () => {
          document.getElementById('grid-view').style.display = "none";
          gsap.set("#selection-view", { display: "block", opacity: 0 });
          gsap.to("#selection-view", { duration: 0.6, y: 0, opacity: 1, ease: "power3.out" });
        }});
      }

      function openProject(id) {
        const p = allItems.find(x => x.ID == id);
        document.getElementById('project-title').innerText = p.Titulo;
        document.getElementById('project-desc').innerText = p.Descripcion;
        document.getElementById('project-date').innerText = p.Fecha || "2026";
        document.getElementById('project-client').innerText = p.Cliente || "Private";
        
        let url = p.VideoURL;
        let content = url.includes('youtube') 
          ? `<div style="position:relative;padding-bottom:56.25%;height:0;"><iframe src="https://www.youtube.com/embed/${url.includes('v=') ? url.split('v=')[1] : url.split('/').pop()}?autoplay=1" style="position:absolute;top:0;left:0;width:100%;height:100%;border-radius:4px;" frameborder="0" allowfullscreen></iframe></div>`
          : `<video controls autoplay style="width:100%; border-radius:4px;"><source src="${url}" type="video/mp4"></video>`;
        
        document.getElementById('project-visual-content').innerHTML = content;
        
        gsap.to("#grid-view", { duration: 0.4, opacity: 0, y: 20, display: "none", onComplete: () => {
          gsap.set("#project-single-view", { display: "block", opacity: 0 });
          gsap.to("#project-single-view", { duration: 0.6, y: 0, opacity: 1, ease: "power3.out" });
          gsap.fromTo("#btn-back-grid", { opacity: 0, x: 20 }, { duration: 0.5, opacity: 1, x: 0, delay: 0.4 });
          gsap.fromTo(".meta-item", { opacity: 0, x: 20 }, { duration: 0.5, opacity: 1, x: 0, stagger: 0.15, delay: 0.4 });
        }});
      }

      function closeProject() {
        gsap.to("#project-single-view", { duration: 0.4, opacity: 0, y: 20, onComplete: () => {
          document.getElementById('project-single-view').style.display = "none";
          document.getElementById('project-visual-content').innerHTML = "";
          gsap.set("#grid-view", { display: "block", opacity: 0 });
          gsap.to("#grid-view", { duration: 0.6, y: 0, opacity: 1, ease: "power3.out" });
        }});
      }
    </script>
  </body>
</html>
